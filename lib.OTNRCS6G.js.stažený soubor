import{a as l}from"./lib.K5BZ6UV3.js";import{a as u,b}from"./lib.LE4HQ5U6.js";var o,d=n=>n.includes(" ")?n.split(" ")[1]:n;function E(n,i=!0){if(n.dataset.watched)return;n.dataset.watched="1";let c=$('<div class="chat__members__inner">').appendTo(n),f=$(`<div class="chat__members__number" data-icon="${"\uE050"}" title="Spectators"></div>`).appendTo(c),r=$("<div>").appendTo(c),a=r[0];l.on("socket.in.crowd",s=>m(s.watchers||s));let m=s=>{if(o=s,!s||!s.nb){n.classList.add("none");return}if(f.text(i?String(s.nb):i18n.broadcast.nbViewers(s.nb)),s.users&&i){let p=s.users.map(e=>e||"").join(";");if(u(a,"prevUsers")!==p){b(a,"prevUsers",p);let e=s.users.map(t=>t?`<a class="user-link ulpt" href="/@/${d(t)}">${t}</a>`:"Anonymous");s.anons===1?e.push("Anonymous"):s.anons&&e.push(`Anonymous (${s.anons})`),r.html(e.join(", "))}}else r.html("");n.classList.remove("none")};o&&m(o)}export{E as a};
